# Первоначальная настройка Ubuntu Server (24.04 и выше)
Скрипт атоматизирует базовую безопасную настройку свежеустановленной Ubuntu Server. Создает пользователя, настраивает SSH (ключи, IPv4), UFW, Fail2Ban и отключает root.

# Установка

Для установки достаточно выполнить данную команду на сервере.
```
bash <(wget -q -O - https://raw.githubusercontent.com/EikeiDev/ubuntu-initial-setup/refs/heads/main/setup.sh)
```

### Что делает скрипт?

1.  **Обновляет систему:** Полностью обновляет все пакеты до последних версий (`apt update && apt full-upgrade`) и удаляет ненужные (`autoremove`).
2.  **Устанавливает UFW и bc:** Ставит файрвол (`UFW`) и утилиту-калькулятор `bc` (она нужна в шаге 5 для сравнения версий Ubuntu).
3.  **Создает нового пользователя:** Запрашивает у вас имя, создает нового пользователя и добавляет его в группу `sudo`, давая ему права администратора.
4.  **Генерирует SSH-ключи:** Создает для этого нового пользователя пару SSH-ключей (приватный и публичный) и сразу же авторизует публичный ключ для входа.
5.  **Настраивает SSH (Порт):** Запрашивает у вас новый порт для SSH (вместо стандартного 22-го). Он также настраивает SSH-сервер так, чтобы он слушал **только IPv4-адреса**.
6.  **Настраивает SSH (Безопасность):** Редактирует конфигурацию SSH, чтобы **запретить вход по паролю** (оставляя только вход по ключам) и **полностью запретить вход пользователю `root`**.
7.  **Настраивает UFW:** Открывает в файрволе тот самый новый SSH-порт, который вы указали в шаге 5, и принудительно включает файрвол.
8.  **Отключает ICMP (Ping):** Редактирует правила UFW, чтобы сервер **перестал отвечать на `ping`** (ICMP-запросы).
9.  **Просит о проверке:** Скрипт делает паузу и просит вас (не закрывая текущую сессию) попробовать подключиться в новом окне, используя нового пользователя, новый порт и SSH-ключ.
10. **Отключает root:** Только после того, как вы введете `yes` (подтверждая, что проверка в шаге 9 прошла успешно), скрипт окончательно блокирует пользователя `root`, запрещая ему любой вход в систему.
11. **Показывает приватный ключ:** Выводит в консоль содержимое **приватного** ключа, чтобы вы могли скопировать его на свой локальный компьютер для подключения.
